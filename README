# MC Tuning

## Software Used
- Rivet  
- ROOT  
- Professor  
- C++ / Python  

---

## Extract χ² values from PDF plots

```bash
usage: python extract_chi2.py --input INPUT --output OUTPUT

optional arguments:
  -h, --help       show this help message and exit
  --input INPUT    Input PDF file, directory, or wildcard pattern
  --output OUTPUT  Output directory name (optional). If not given, it is auto-generated.

This step creates two text files:

chi2_values.txt → contains only the χ² values extracted from the PDFs

chi2_histo_values.txt → contains histogram names along with χ² values

Normalize χ² values (scale 0 → 10)
Compile : g++ Normalize.C $(root-config --cflags --libs) -o normalize
Execute : ./normalize input.txt output.txt

Example:
./normalize chi2_values.txt normalized_output.txt
Plot normalized χ² vs parameter
Compile : g++ Plotter.C $(root-config --cflags --libs) -o plotter

Execute :
./plotter normalized.txt --parameter "aLund Fragmentation function" \
--mode combined \
--names chi2_histo_values.txt \
--output dir
Usage
./plotter normalized.txt --parameter <name> \
--mode [combined|individual|refined] \
[--names file] [--output dir] \
[--range xmin xmax step] [--xvalues file]
Options

normalized.txt → normalized χ² values

--parameter → name of the scan parameter (x-axis label)

--mode

combined → all histograms in one canvas

individual → one histogram per canvas

refined → only histograms with a single minimum are kept

--names → histogram name file (chi2_histo_values.txt)

--output → output directory

--range → define x-axis as xmin xmax step

--xvalues → file containing explicit scan points

Compare two refined directories

Compare two scan results (e.g. refined-A and refined-B).

Features

Overlay histograms from two directories

Automatically match histograms by name

Skip unmatched histograms

Helps identify sensitive tuning regions

Compile
g++ Compare.C $(root-config --cflags --libs) -o compare
Run examples
# Combined mode (all plots in one canvas)
./compare --input1 refined-A --input2 refined-B \
--mode combined --output comp_out \
--xvaluesA scan_points.txt --xvaluesB scan_points.txt

# Individual mode (only matched plots)
./compare --input1 refined-A --input2 refined-B \
--mode individual --output comp_out \
--rangeA 0.0 1.0 0.1 --rangeB 0.0 1.0 0.1
Usage
./compare --input1 dirA --input2 dirB --mode [combined|individual] --output outdir
Optional x-axis control
--xvaluesA file   OR   --rangeA xmin xmax step
--xvaluesB file   OR   --rangeB xmin xmax step
Filter histograms for Professor tuning

Select only the histograms present in refined scans to build the Professor tuning dataset.

Compile
g++ Filter.C $(root-config --cflags --libs) -o filter
Usage
./filter lists.dat refined-A/refined_plots.txt refined-B/refined_plots.txt output.dat

Workflow Summary

Extract χ² from PDFs

Normalize χ² values

Plot scans and refine histograms

Compare scans between different parameter setups

Filter histograms for Professor tuning

Run prof2-ipol → prof2-tune

Notes

All plots are saved as PDF

Refined mode keeps only single-minimum distributions

Compatible with Rivet + Professor tuning workflow
